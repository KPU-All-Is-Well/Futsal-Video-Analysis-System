<!DOCTYPE html>
<html>
<head>
<title>Google chart </title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript"
    src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
    var queryObject = "";
    var queryObjectLen = "";
    $.ajax({
        type : 'POST',
        url : 'googleChart_Process.jsp',
        dataType : 'json',
        success : function(data) {
            
            
            queryObject = eval('(' + JSON.stringify(data,null, 2) + ')');             
            // stringify : 인자로 전달된 자바스크립트의 데이터(배열)를 JSON문자열로 바꾸기.   
            // eval: javascript 코드가 맞는지 검증하고 문자열을 자바스크립트 코드로 처리하는 함수 
            // queryObject.barlist[0].city ="korea"
 
            queryObjectLen = queryObject.barlist.length;
            // queryObject.empdetails 에는 4개의 Json 객체가 있음 
 
            //alert('ㅋㅋ' + queryObjectLen);
            // alert(queryObject.barlist[0].city +queryObject.barlist[0].per );
        },
        error : function(xhr, type) {
            alert('server error occoured')
        }
    });
 
    
    
    google.charts.load('current', {
        packages : [ 'corechart', 'bar' ]
    });
    google.charts.setOnLoadCallback(drawMultSeries);
 
    function drawMultSeries() {
        
         var data = new google.visualization.DataTable();
         data.addColumn('string', 'name');
         data.addColumn('number', 'totalDistance');
         data.addColumn('number', 'maxSpeed');
 
        //alert('data생성');
        for (var i = 0; i < queryObjectLen; i++) {
            var name = queryObject.barlist[i].name;
            var totalDistance = queryObject.barlist[i].totalDistance;
            var maxSpeed = queryObject.barlist[i].maxSpeed;
            
            //alert(city + amount + per);
             data.addRows([
                            [name,totalDistance,maxSpeed]
                        ]);
 
        }
 
        var options = {
            title : 'Total Distance you ran',
            titleTextStyle: { 
                color: 'white' // 타이틀 색
            },
            chartArea : {
                width : '50%'
            },
            hAxis : {
                title : 'TEST IMPORMATION',
                minValue : 0,
                color: 'white',
                textStyle:{
                    color:'white'
                }
            },
            vAxis : {
                title : 'Name',
                titleTextStyle: { 
                    color: 'white' // 타이틀 색
                },
                textStyle:{
                    color:'white'
                },
                gridlines: { // 중간의 선
                    color: '#8898A1'
                },
                baselineColor:'8898A1' // 하단 선
            },
            
            backgroundColor: {
            	fill : '#000000', //#01253f 남색, #001b2d 찐남색
            	opacity : 100
            },
            legend:{ // 항목
                textStyle:{
                   color:'white'
                }
            }
          

        };
        var chart = new google.visualization.BarChart(document
                .getElementById('chart_div'));
        chart.draw(data, options);
        //chart.draw(data, options).style.backgroundColor = "#3c4043";

    }
</script>
</head>
<body bgcolor='#01253f'>
    <div id="chart_div"></div>
 
</body>
</html>